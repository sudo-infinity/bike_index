!!!
%html
  %head
    %title
      Bike Index API documentation
    <link rel="shortcut icon" href="/fav.ico" />
    = stylesheet_link_tag "documentation_v2", media: "all"
    = stylesheet_link_tag "application", media: "all"
    <script type="text/javascript">window.base_url = "#{ENV['BASE_URL']}";</script>
    = stylesheet_link_tag "updated", media: "all"
    <link href='http://fonts.googleapis.com/css?family=Anonymous+Pro:400,400italic,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    = javascript_include_tag "documentation_v2"
    
  %body.swagger-section
    / { data: { spy: 'scroll', target: '.docs-section-list'}}
    / data-spy="scroll" data-target=".navbar"
    %header#header
      .content-header
        .container-fluid.bikes-nav
          .small-header
            %a.top-logo{ href: root_url }
              %span.stripey
              = image_tag "/assets/updated/home/logo.svg", class: 'logo'
          %form#api_selector.form
            .api-header-group.api-header-url
              / %label{ for: 'baseUrl' }
              /   Swagger doc url
              / %input#input_baseUrl.form-control{:name => "baseUrl", :placeholder => "https://bikeindex.org/api/v2", :type => "text"}
            .api-header-group.api-header-key
              %label{ for: 'baseUrl' }
                Access token
              %input#input_apiKey.form-control{:name => "apiKey", :placeholder => "api_key", :type => "text"}
            %a#explore.btn.binxbtn{:href => "#"}
              Explore
    %nav.docs-section-list#navmenu-fixed
      %a{ href: '#ref_title' }
        Bike Index API V2
      %ul
        %li
          %a{ href: "#ref_introduction" }
            Introduction
        %li
          %a{ href: "#ref_cors" }
            CORS
        %li
          %a{ href: "#ref_the_word_bike" }
            The word "bike"
        %li
          %a{ href: "#ref_bike_urls" }
            Bike urls
        %li
          %a{ href: "#ref_time" }
            Time
        %li
          %a{ href: '#ref_authentication' }
            Authentication
      %a{ href: '#ref_endpoints' }
        Endpoints
      %ul
        %li
          %a{ href: '#resource_me' }
            Me
        %li
          %a{ href: '#resource_bikes' }
            Bikes
        %li
          %a{ href: '#resource_bikes_search' }
            Bikes search
        %li
          %a{ href: '#resource_manufacturers' }
            Manufacturers
        %li
          %a{ href: '#resource_selections' }
            Selections
            
      %a{ href: '#ref_oauth' }
        OAuth
      %ul
        %li
          %a{ href: '#ref_your_applications' }
            Your applications
        %li
          %a{ href: '#ref_plugins' }
            Plugins and external libraries
        %li
          %a{ href: '#ref_oauth_flows' }
            OAuth flows
        %li
          %a{ href: '#ref_applications_authorized' }
            Applications authorized
        %li
          %a{ href: '#ref_sending_in_requests' }
            Sending access tokens
        %li
          %a{ href: '#ref_refresh_tokens' }
            Refresh tokens


    .container-fluid
      .api-info-header

        / .alert
        /   %p
        /     %strong
        /       This API is in beta.
        /     contact #{link_to "seth@bikeindex.org", "mailto:seth@bikeindex.org"} with questions or for updates.
        /   %p.padded
        /     %strong
        /       Upcoming features:
        /   %ul
        /     %li
        /       Marking a bike recovered
        /   %ul
        /     %li
        /       Refresh token documentation
        /     %li
        /       Client-side flow documentation

        :plain
          #{render "documentation/api_v2/info_header"}
      
      .start-of-swagger-ui
        %h2
          Bike Index API V2 endpoints
          <a id="ref_endpoints"></a>

    #message-bar.swagger-ui-wrap &nbsp;

    #swagger-ui-container.swagger-ui-wrap
  
    .applications-panel#applications_list
      .container-fluid
        .clearfix
          %h2
            Your applications:
            %span.pull-right.less-strong
              = link_to "Add an application", "/oauth/applications"
            <a id="ref_your_applications"></a>
          = render 'api_v2_applications'

    .container-fluid
      .api-info-footer
        :plain
          #{render "documentation/api_v2/info_footer"}

    / %hr
    .container-fluid
      .alert.alert-info.margined
        %p
          / %strong
          /   About this documentation:
          This documentation is generated by #{link_to "Swagger.io", "https://github.com/swagger-api/swagger-ui", target: '_blank'}. To learn more about Swagger and why it's awesome check out #{link_to "Swagger.io", "http://swagger.io/", target: '_blank'}.
        .form-group
          %label.control-label{ for: 'input_baseUrl' }
            Swagger doc url
          %input#input_baseUrl.form-control{:name => "baseUrl", :placeholder => "https://bikeindex.org/api/v2", :type => "text"}

    = render 'shared/footer_updated'